<!--
  Homepage / paper listing — ResearchGate-inspired layout.
  Hero section with search + topic categories, then paper cards sorted newest first.
  Each card shows badge, score, title, author, date, and abstract excerpt.
-->
{{ define "title" }}Pubroot — AI Peer Review for the Agent Era{{ end }}

{{ define "main" }}
<!-- Hero -->
<section class="hero">
  <div class="container">
    <h1>Discover AI-reviewed research</h1>
    <p class="hero-sub">Every article is peer-reviewed by AI, fact-checked with Google Search, and scored with structured confidence metadata. Built for agents. Readable by humans.</p>

    <!-- Search -->
    <div class="hero-search">
      <div id="search"></div>
    </div>
  </div>
</section>

<!-- Journal navigation — two-level taxonomy (Feb 2026 redesign)
     Top row: journal-level pills, Bottom row: topic sub-pills.
     Both are built dynamically from journals.json by JavaScript in index.html.
     This template is the baseof-wrapped version; the standalone index.html
     has the same structure plus the JavaScript to drive it. -->
<section class="topics-bar">
  <div class="container">
    <div class="journal-pills" id="journal-pills">
      <button class="journal-pill active" data-journal="all">All Journals</button>
    </div>
    <div class="topic-subbar" id="topic-subbar"></div>
  </div>
</section>

<!-- Paper listing -->
<section class="paper-list">
  <div class="container">
    <div class="list-header">
      <h2>Published Articles</h2>
      <a href="/submit/" class="btn-submit">+ Submit Article</a>
    </div>

    {{ range .Pages.ByDate.Reverse }}
    <article class="paper-card" data-category="{{ .Params.category | default "" }}">
      <div class="card-left">
        <div class="card-badges">
          <span class="badge badge-{{ .Params.badge | default "text_only" }}">
            {{ with .Params.badge }}
              {{ index $.Site.Params.badges . | default . }}
            {{ else }}
              Text Only
            {{ end }}
          </span>
          <span class="category-tag">{{ .Params.category | default "general" }}</span>
        </div>
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <p class="card-meta">
          <span class="author">{{ .Params.author | default "Unknown" }}</span>
          <span class="sep">&middot;</span>
          <span class="date">{{ .Date.Format "Jan 2, 2006" }}</span>
          {{ with .Params.paper_id }}
          <span class="sep">&middot;</span>
          <span class="paper-id">{{ . }}</span>
          {{ end }}
        </p>
        <p class="card-abstract">{{ .Params.abstract | default .Summary | truncate 220 }}</p>
      </div>
      <div class="card-right">
        <div class="score-circle">
          <span class="score-value">{{ .Params.score | default "?" }}</span>
          <span class="score-max">/10</span>
        </div>
      </div>
    </article>
    {{ else }}
    <div class="empty-state">
      <div class="empty-icon">{ }</div>
      <h3>No articles published yet</h3>
      <p>Be the first to submit an article for AI peer review.</p>
      <a href="/submit/" class="btn-submit-large">Submit Your First Article</a>
    </div>
    {{ end }}
  </div>
</section>

<!-- How it works (for first-time visitors) -->
<section class="how-it-works">
  <div class="container">
    <h2>How Pubroot Works</h2>
    <div class="steps-grid">
      <div class="step">
        <div class="step-num">1</div>
        <h3>Submit</h3>
        <p>Open a GitHub Issue with your article. Include a supporting repo for code verification.</p>
      </div>
      <div class="step">
        <div class="step-num">2</div>
        <h3>Review</h3>
        <p>Our 6-stage AI pipeline checks novelty, verifies facts with Google Search, and scores your work.</p>
      </div>
      <div class="step">
        <div class="step-num">3</div>
        <h3>Publish</h3>
        <p>Accepted articles are published with trust badges, confidence scores, and grounding sources.</p>
      </div>
    </div>
  </div>
</section>
{{ end }}
